<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <title>麻雀点数計算暗記アプリ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="color-scheme" content="light dark">
  <style>
    :root {
      --bg: #fafafa;
      --fg: #222;
      --card: #fff;
      --muted: #f2f5fb;
      --brand: #1b75bb;
      --brand-strong: #14619c;
      --ok-bg: #e5f6e0;
      --ok-fg: #1a7f37;
      --ok-bd: #a4d7a0;
      --ng-bg: #fdecea;
      --ng-fg: #c62828;
      --ng-bd: #f6b8b5;
      --bd: #ddd;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0f1115;
        --fg: #e7e7e7;
        --card: #141821;
        --muted: #1d2431;
        --brand: #4aa3ff;
        --brand-strong: #2a83df;
        --ok-bg: #113a1e;
        --ok-fg: #9ae6b4;
        --ok-bd: #1f6f3b;
        --ng-bg: #3b1211;
        --ng-fg: #ffb4b0;
        --ng-bd: #7a2a27;
        --bd: #2a3140;
        --shadow: 0 10px 40px rgba(0, 0, 0, .4);
      }
    }

    html,
    body {
      height: 100%;
      background: var(--bg);
      color: var(--fg);
      -webkit-text-size-adjust: 100%;
    }

    body {
      margin: env(safe-area-inset-top) 0 env(safe-area-inset-bottom);
      padding: 24px 16px 64px;
      display: flex;
      justify-content: center;
      line-height: 1.6;
    }

    main {
      max-width: 960px;
      width: 100%;
      background: var(--card);
      border-radius: 16px;
      padding: clamp(24px, 3.5vw, 48px);
    }

    h1 {
      font-size: clamp(1.5rem, 4vw, 2.4rem);
      margin: 0 0 24px;
      text-align: center;
      line-height: 1.25;
    }

    h2 {
      font-size: clamp(1.2rem, 3.5vw, 1.6rem);
      margin: 0 0 16px;
    }

    .intro-summary {
      display: grid;
      gap: 12px;
      margin: 0 0 28px;
      font-size: clamp(1rem, 2.6vw, 1.1rem);
    }

    .intro-summary .lead {
      font-weight: 600;
      font-size: clamp(1.05rem, 3vw, 1.2rem);
    }

    .info-block {
      background: color-mix(in oklab, var(--muted) 55%, transparent);
      border: 1px solid var(--bd);
      border-radius: 12px;
      padding: 18px clamp(16px, 3vw, 24px);
      display: grid;
      gap: 12px;
      margin: 0 0 24px;
    }

    .info-block h2 {
      margin: 0;
      font-size: clamp(1.15rem, 3vw, 1.45rem);
    }

    .plain-list {
      margin: 0;
      padding-left: 1.2em;
      display: grid;
      gap: 8px;
      font-size: clamp(1rem, 2.7vw, 1.1rem);
    }

    .plain-list li {
      line-height: 1.5;
    }

    .list-keyword {
      font-weight: 600;
      color: var(--brand-strong, var(--brand));
    }

    .info-block:last-of-type {
      margin-bottom: 0;
    }

    .actions {
      text-align: center;
      margin: 24px 0;
    }

    button {
      font-size: 1.05rem;
      padding: 14px 28px;
      min-height: 48px;
      /* 親指サイズ */
      border-radius: 14px;
      background: var(--brand);
      color: #fff;
      border: none;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }

    button:hover {
      background: var(--brand-strong);
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(0);
    }

    section {
      display: none;
    }

    section.active {
      display: grid;
      /* block → grid に */
      row-gap: 24px;
      /* ここが“距離” */
    }

    .question-list {
      margin: 0 0 20px;
      padding-left: 20px;
      font-size: clamp(1rem, 2.6vw, 1.1rem);
    }

    /* 解答ボタングリッド：画面幅に合わせて自動段組 */
    .answer-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      /* スマホは2列 */
      gap: 12px;
    }

    @media (min-width: 540px) {
      .answer-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (min-width: 900px) {
      .answer-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .answer-button {
      background: transparent;
      border: 2px solid var(--fg);
      color: var(--fg);
      font-size: clamp(1rem, 2.8vw, 1.1rem);
      padding: 16px 12px;
      border-radius: 12px;
      transition: background .2s ease, color .2s ease, transform .18s ease, box-shadow .18s ease, opacity .18s ease;
      min-height: 56px;
      width: 100%;
    }

    .answer-button:hover {
      background: var(--brand);
      color: #fff;
      transform: translateY(-1px);
    }

    .answer-button.correct {
      border-color: var(--brand);
      background: color-mix(in oklab, var(--brand) 15%, transparent);
    }

    .answer-button.incorrect {
      border-color: #d93a35;
      background: color-mix(in oklab, #d93a35 15%, transparent);
    }

    .result-message {
      margin: 20px 0;
      padding: 14px 16px;
      border-radius: 12px;
      font-size: clamp(1rem, 2.8vw, 1.1rem);
    }

    .result-message.success {
      background: var(--ok-bg);
      color: var(--ok-fg);
      border: 1px solid var(--ok-bd);
    }

    .result-message.failure {
      background: var(--ng-bg);
      color: var(--ng-fg);
      border: 1px solid var(--ng-bd);
    }

    /* スコア表（折りたたみ + 横スクロール） */
    .score-guide {
      border: 1px solid var(--bd);
      border-radius: 12px;
      background: color-mix(in oklab, var(--muted) 60%, transparent);
      margin: 16px 0 8px;
      overflow: hidden;
    }

    .score-guide>summary {
      list-style: none;
      cursor: pointer;
      padding: 14px 16px;
      font-weight: 600;
      user-select: none;
      outline: none;
    }

    .score-guide>summary::marker {
      display: none;
    }

    .score-guide[open]>summary {
      border-bottom: 1px solid var(--bd);
    }


    .table-scroll {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    .score-table {
      width: 100%;
      border-collapse: collapse;
      font-size: clamp(0.95rem, 2.4vw, 1rem);
      min-width: 720px;
      /* 横スク時に崩さない */
    }

    .score-table th,
    .score-table td {
      border: 1px solid var(--bd);
      text-align: center;
      padding: clamp(10px, 2vw, 16px);
      white-space: nowrap;
    }

    .score-table thead {
      background: var(--muted);
      font-weight: 600;
    }

    /* アニメーション控えめ（好み） */
    @media (prefers-reduced-motion: reduce) {
      * {
        transition: none !important;
        animation: none !important;
      }
    }

    /* スクリーンリーダー補助 */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
</head>

<body>
  <main>
    <h1>麻雀点数計算速習アプリ</h1>

    <section id="intro" class="active">
      <div class="intro-summary">
        <p class="lead">点パネ(符ハネ)なしのケースの点数計算練習アプリです。</p>
        <p>実践で登場する形の8〜9割に対応しています。
          <br> 点パネありの代表的なケースはページ下部に記載しました。
        </p>
      </div>

      <div class="info-block">
        <h2>符計算の基本 (点パネなし)</h2>
        <ul class="plain-list">
          <li><span class="list-keyword">平和ツモ</span> → 20符</li>
          <li><span class="list-keyword">七対子</span> → 25符</li>
          <li><span class="list-keyword">平和以外の門前ロン</span> → 40符</li>
          <li><span class="list-keyword">それ以外</span> → 30符</li>
        </ul>
      </div>

      <div class="actions">
        <button id="start-button" type="button">練習スタート</button>
      </div>

      <div class="info-block">
        <h2>補足1: 覚え方のコツ</h2>
        <ul class="plain-list">
          <li>符や飜が2倍になると点数も(だいたい)2倍になる</li>
          <li>親の点数は子のおよそ1.5倍になる</li>
        </ul>
      </div>

      <div class="info-block">
        <h2>補足2: 代表的な点パネパターン</h2>
        <ul class="plain-list">
          <li>19字牌の暗槓 (+32符)</li>
          <li>19字牌の明槓 (+16符)</li>
          <li>2〜8数牌の暗槓 (+16符)</li>
          <li>19字牌の暗刻 (+8符) + 任意の牌の暗刻 (+4符 or +8符)</li>
          <li>19字牌の暗刻 (+8符) + 19字牌の明刻 (+4符)</li>
          <li>19字牌の暗刻 (+8符) + 愚形 (+2符) + ツモ (+2符)</li>
          <li>19字牌の明刻 (+4符) ×2 + 愚形 (+2符) + ツモ (+2符)</li>
        </ul>
      </div>
    </section>


    <section id="result">
      <div class="result-message" id="result-message"></div>

      <div class="actions">
        <button id="retry-button" type="button">もう一度練習する</button>
      </div>
      <button class="back-to-intro">スタートページに戻る</button>
      <table class="score-table">
        <thead>
          <tr>
            <th>翻数</th>
            <th>平和ツモ<br>20符</th>
            <th>七対子<br>25符</th>
            <th>鳴き手ロン/ツモ<br>または平和ロン<br>30符</th>
            <th>鳴きなしロン<br>(平和以外)<br>40符</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>1翻</th>
            <td>なし</td>
            <td>なし</td>
            <td>ロン: 1000<br>ツモ: 300-500</td>
            <td>ロン: 1300<br>ツモ: 400-700</td>
          </tr>
          <tr>
            <th>2翻</th>
            <td>ツモ: 400-700</td>
            <td>ロン: 1600</td>
            <td>ロン: 2000<br>ツモ: 500-1000</td>
            <td>ロン: 2600<br>ツモ: 700-1300</td>
          </tr>
          <tr>
            <th>3翻</th>
            <td>ツモ: 700-1300</td>
            <td>ロン: 3200<br>ツモ: 800-1600</td>
            <td>ロン: 3900<br>ツモ: 1000-2000</td>
            <td>ロン: 5200<br>ツモ: 1300-2600</td>
          </tr>
          <tr>
            <th>4翻</th>
            <td>ツモ: 1300-2600</td>
            <td>ロン: 6400<br>ツモ: 1600-3200</td>
            <td colspan="2">満貫<br>ロン: 8000<br>ツモ: 2000-4000</td>
          </tr>
          <tr>
            <th>5翻</th>
            <td colspan="4">満貫<br>ロン: 8000<br>ツモ: 2000-4000</td>
          </tr>
          <tr>
            <th>6,7翻</th>
            <td colspan="4">跳満<br> ロン: 12000<br>ツモ: 3000-6000</td>
          </tr>
          <tr>
            <th>倍満</th>
            <td colspan="4">倍満<br> ロン: 16000<br>ツモ: 4000-8000</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="question_tumo_ko" class="section">
      <h2>この手の点数は？</h2>
      <ul class="question-list"></ul>
      <div class="answer-grid">
        <button class="answer-button" data-score="300-500" type="button">300-500</button>
        <button class="answer-button" data-score="400-700" type="button">400-700</button>
        <button class="answer-button" data-score="500-1000" type="button">500-1000</button>
        <button class="answer-button" data-score="700-1300" type="button">700-1300</button>
        <button class="answer-button" data-score="1000-2000" type="button">1000-2000</button>
        <button class="answer-button" data-score="1300-2600" type="button">1300-2600</button>
        <button class="answer-button" data-score="1600-3200" type="button">1600-3200</button>
        <button class="answer-button" data-score="2000-4000" type="button">2000-4000(満貫)</button>
        <button class="answer-button" data-score="3000-6000" type="button">3000-6000(跳満)</button>
        <button class="answer-button" data-score="4000-8000" type="button">4000-8000(倍満)</button>
        <button class="answer-button" data-score="6000-12000" type="button">6000-12000(三倍満)</button>
      </div>
      <button class="back-to-intro">スタートページに戻る</button>
    </section>

    <section id="question_ron_ko" class="section">
      <h2>この手の点数は？</h2>
      <ul class="question-list"></ul>
      <div class="answer-grid">
        <button class="answer-button" data-score="1000" type="button">1000</button>
        <button class="answer-button" data-score="1300" type="button">1300</button>
        <button class="answer-button" data-score="1600" type="button">1600</button>
        <button class="answer-button" data-score="2000" type="button">2000</button>
        <button class="answer-button" data-score="2600" type="button">2600</button>
        <button class="answer-button" data-score="3200" type="button">3200</button>
        <button class="answer-button" data-score="3900" type="button">3900</button>
        <button class="answer-button" data-score="5200" type="button">5200</button>
        <button class="answer-button" data-score="6400" type="button">6400</button>
        <button class="answer-button" data-score="8000" type="button">8000(満貫)</button>
        <button class="answer-button" data-score="12000" type="button">12000(跳満)</button>
        <button class="answer-button" data-score="16000" type="button">16000(倍満)</button>
        <button class="answer-button" data-score="24000" type="button">24000(三倍満)</button>
      </div>
      <button class="back-to-intro">スタートページに戻る</button>
    </section>

    <section id="question_tumo_oya" class="section">
      <h2>この手の点数は？</h2>
      <ul class="question-list"></ul>
      <div class="answer-grid">
        <button class="answer-button" data-score="500all" type="button">500all</button>
        <button class="answer-button" data-score="700all" type="button">700all</button>
        <button class="answer-button" data-score="1000all" type="button">1000all</button>
        <button class="answer-button" data-score="1300all" type="button">1300all</button>
        <button class="answer-button" data-score="2000all" type="button">2000all</button>
        <button class="answer-button" data-score="2600all" type="button">2600all</button>
        <button class="answer-button" data-score="3200all" type="button">3200all</button>
        <button class="answer-button" data-score="4000all" type="button">4000all(満貫)</button>
        <button class="answer-button" data-score="6000all" type="button">6000all(跳満)</button>
        <button class="answer-button" data-score="8000all" type="button">8000all(倍満)</button>
        <button class="answer-button" data-score="12000all" type="button">12000all(三倍満)</button>
      </div>
      <button class="back-to-intro">スタートページに戻る</button>
    </section>

    <section id="question_ron_oya" class="section">
      <h2>この手の点数は？</h2>
      <ul class="question-list"></ul>
      <div class="answer-grid">
        <button class="answer-button" data-score="1500" type="button">1500</button>
        <button class="answer-button" data-score="2000" type="button">2000</button>
        <button class="answer-button" data-score="2400" type="button">2400</button>
        <button class="answer-button" data-score="3000" type="button">3000</button>
        <button class="answer-button" data-score="3900" type="button">3900</button>
        <button class="answer-button" data-score="4800" type="button">4800</button>
        <button class="answer-button" data-score="5800" type="button">5800</button>
        <button class="answer-button" data-score="7700" type="button">7700</button>
        <button class="answer-button" data-score="9600" type="button">9600</button>
        <button class="answer-button" data-score="12000" type="button">12000(満貫)</button>
        <button class="answer-button" data-score="18000" type="button">18000(跳満)</button>
        <button class="answer-button" data-score="24000" type="button">24000(倍満)</button>
        <button class="answer-button" data-score="36000" type="button">36000(三倍満)</button>
      </div>
      <button class="back-to-intro">スタートページに戻る</button>
    </section>

  </main>

  <script type="module" src="apps.js"></script>
</body>

</html>